<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8" />
<meta content="width=device-width,initial-scale=1" name="viewport" />
<title>Year 10 — Quiz & Packs (Pokémon)</title>
<link href="favicon.png" rel="icon" />
<!-- Google fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&amp;display=swap" rel="stylesheet">
<!-- Google Identity Services (GSI) + jwt-decode (kept like your previous file) -->
<script async="" defer src="https://accounts.google.com/gsi/client"></script>
<script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
<!-- Firebase (compat) - leave as you had it so main.js works -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<meta content="#0d47a1" name="theme-color" />
<style>
:root {
	--bg-1: linear-gradient(180deg,#e8f6ff,#f7fbff);
	--accent-1: #0d47a1;
	--accent-2: #1976d2;
	--muted: #6b7a90;
	--card: #ffffff;
	--glass: rgba(255,255,255,0.55);
	--radius: 14px;
	--glass-border: rgba(11,37,69,0.06);
	--accent-3: #006064;
}
html, body {
	height: 100%;
	margin: 0;
	font-family: Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
	background: var(--bg-1);
	color: #07213a;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}
header {
	height: 64px;
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 0 18px;
	background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
	color: white;
	box-shadow: 0 6px 20px rgba(11,37,69,0.12);
	position: sticky;
	top: 0;
	z-index: 1200;
}
.brand {
	display: flex;
	gap: 12px;
	align-items: center;
}
.brand .logo {
	width: 44px;
	height: 44px;
	border-radius: 10px;
	background: linear-gradient(135deg,#ffd54f,#ff7043);
	display: flex;
	align-items: center;
	justify-content: center;
	font-weight: 800;
	color: #07213a;
	box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}
h1 {
	font-size: 16px;
	margin: 0;
	font-weight: 700;
	letter-spacing: -0.2px;
}
header .right {
	margin-left: auto;
	display: flex;
	gap: 10px;
	align-items: center;
}
/* Layout */
.wrap {
	display: flex;
	min-height: calc(100vh - 64px);
}
nav#sidebar {
	width: 260px;
	background: linear-gradient(180deg,#07213a,#0d2a57);
	color: white;
	padding: 18px;
	box-sizing: border-box;
	border-right: 1px solid rgba(255,255,255,0.03);
	transform: translateX(0);
}
nav#sidebar .profile-compact {
	display: flex;
	gap: 10px;
	align-items: center;
	margin-bottom: 16px;
}
.avatar-mini {
	width: 56px;
	height: 56px;
	border-radius: 10px;
	background-image: url('default_avatar.png');
	background-size: cover;
	background-position: center;
	border: 3px solid rgba(255,255,255,0.06);
}
.sidebar-name {
	font-weight: 700;
}
.sidebar-sub {
	font-size: 12px;
	color: rgba(255,255,255,0.85);
}
nav#sidebar ul {
	list-style: none;
	padding: 0;
	margin: 12px 0 0 0;
}
nav#sidebar li {
	margin: 8px 0;
}
nav#sidebar button {
	width: 100%;
	text-align: left;
	border: none;
	background: transparent;
	color: rgba(255,255,255,0.95);
	padding: 10px 12px;
	font-size: 15px;
	border-radius: 10px;
	cursor: pointer;
	display: flex;
	align-items: center;
	gap: 8px;
}
nav#sidebar button:hover {
	background: rgba(255,255,255,0.04);
	transform: translateX(4px);
}
main {
	flex: 1;
	padding: 22px;
	box-sizing: border-box;
	max-width: 1200px;
	margin: 0 auto;
}
.section {
	display: none;
}
.section.active {
	display: block;
}
.box {
	background: var(--card);
	border-radius: var(--radius);
	padding: 16px;
	box-shadow: 0 8px 30px rgba(11,37,69,0.06);
	border: 1px solid var(--glass-border);
	margin-bottom: 18px;
}
/* Home cover */
.home-cover {
	display: flex;
	align-items: center;
	justify-content: center;
	min-height: 380px;
	border-radius: 12px;
	overflow: hidden;
	position: relative;
}
.home-card {
	display: flex;
	gap: 20px;
	align-items: center;
	width: 100%;
	max-width: 1100px;
}
.home-left {
	flex: 1;
	padding: 24px;
}
.home-right {
	flex: 1;
	padding: 24px;
	display: flex;
	align-items: center;
	justify-content: center;
}
.hero-art {
	width: 100%;
	max-width: 420px;
	border-radius: 12px;
	box-shadow: 0 18px 50px rgba(11,37,69,0.12);
}
/* Packs grid */
.pack-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
	gap: 14px;
}
.pack-option {
	background: linear-gradient(180deg,#fff,#f6fbff);
	border-radius: 12px;
	padding: 12px;
	text-align: center;
	cursor: pointer;
	box-shadow: 0 6px 18px rgba(11,37,69,0.06);
	border: 1px solid var(--glass-border);
	transition: transform .12s ease;
}
.pack-option:hover {
	transform: translateY(-6px);
}
.pack-option img {
	width: 100%;
	height: 140px;
	object-fit: contain;
	border-radius: 8px;
}
/* Pack overlay */
#packOverlay {
	position: fixed;
	inset: 0;
	display: none;
	align-items: center;
	justify-content: center;
	z-index: 1400;
	backdrop-filter: blur(4px);
	background: linear-gradient(180deg, rgba(7,33,58,0.45), rgba(7,33,58,0.65));
}
#packOverlay.show {
	display: flex;
}
.overlay-stage {
	width: 100%;
	max-width: 980px;
	padding: 28px;
	box-sizing: border-box;
	display: flex;
	gap: 24px;
	align-items: flex-start;
	justify-content: center;
	color: white;
}
.overlay-stack {
	width: 260px;
	height: 370px;
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
}
.overlay-card {
	position: absolute;
	width: 240px;
	height: 340px;
	transition: transform .45s ease, opacity .45s ease;
	border-radius: 12px;
	overflow: hidden;
	background: #fff;
	display: flex;
	align-items: center;
	justify-content: center;
}
.overlay-card img {
	width: 100%;
	height: 100%;
	object-fit: contain;
}
.overlay-card.slide-up {
	transform: translateY(-420px);
	opacity: 0;
}
.overlay-meta {
	flex: 1;
}
.overlay-close {
	position: absolute;
	top: 18px;
	right: 18px;
	background: transparent;
	border: 1px solid rgba(255,255,255,0.12);
	color: white;
	padding: 8px 10px;
	border-radius: 8px;
	cursor: pointer;
}
/* pack overlay background per pack */
#packOverlay {
	background-position: center;
	background-size: cover;
	background-repeat: no-repeat;
}
/* classes added by JS: overlay.classList.add(key) where key is 'prismatic' | 'twilight' | 'sv151' */
#packOverlay.prismatic {
	background-image: url('prismatic_bg.png');
}
#packOverlay.twilight {
	background-image: url('yellow.png');
}
#packOverlay.sv151 {
	background-image: url('blue.png');
}
/* ensure overlay content remains readable on mobile */
#packOverlay .overlay-stage {
	backdrop-filter: none;
}
@media (max-width:720px) {
#packOverlay {
	background-attachment: scroll;
}
.overlay-stage {
	padding: 16px;
	flex-direction: column;
	gap: 12px;
	align-items: center;
}
}
/* Card dex */
.card-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(160px,1fr));
	gap: 12px;
}
.card-tile {
	background: linear-gradient(180deg,#ffffff,#f8fbff);
	border-radius: 10px;
	padding: 8px;
	text-align: center;
	border: 1px solid var(--glass-border);
}
.card-tile img {
	width: 100%;
	height: 120px;
	object-fit: contain;
	border-radius: 8px;
}
/* Bazaar listings */
.market-listings {
	display: grid;
	gap: 10px;
}
.listing {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 10px;
	border-radius: 10px;
	background: linear-gradient(180deg,#fff,#f7fbff);
	border: 1px solid var(--glass-border);
}
.listing img {
	width: 64px;
	height: 64px;
	object-fit: cover;
	border-radius: 8px;
}
/* profile card */
.profile-card {
	display: flex;
	gap: 16px;
	align-items: center;
	border-radius: 12px;
	padding: 16px;
	background: linear-gradient(90deg,#7b1fa2,#e53935);
	color: white;
	box-shadow: 0 18px 40px rgba(123,31,162,0.08);
}
.profile-left .avatar {
	width: 120px;
	height: 120px;
	border-radius: 12px;
	background-size: cover;
	background-position: center;
	border: 4px solid rgba(255,255,255,0.12);
}
/* responsive */
@media (max-width:880px){
nav#sidebar {
	display: none;
}
.wrap {
	flex-direction: column;
}
header {
	position: sticky;
	top: 0;
	z-index: 1200;
}
}
footer.note {
	text-align: center;
	color: var(--muted);
	font-size: 13px;
	padding: 20px 0;
}
/* subtle utility */
.muted {
	color: var(--muted);
	font-size: 13px;
}
</style>
</head>

<body>

<header>
	<div class="brand" role="banner">
		<div class="logo">
			PK</div>
		<div>
			<h1>Year 10 — Quiz &amp; Packs</h1>
			<div style="font-size: 12px; color: rgba(255,255,255,0.9); margin-top: 2px">
				Revision game — collect cards, trade, and learn</div>
		</div>
	</div>
	<div class="right">
		<div id="gsiButton" aria-hidden="false">
		</div>
		<button id="googleLogoutBtn" title="Logout">Logout</button></div>
</header>
<div class="wrap">
	<!-- Sidebar (desktop) -->
	<nav id="sidebar" aria-label="Main menu">
		<div class="profile-compact">
			<div id="sidebarAvatar" class="avatar-mini" style="background-image: url('default_avatar.png')">
			</div>
			<div>
				<div id="sidebarName" class="sidebar-name">
					Player</div>
				<div class="sidebar-sub">
					Coins: <strong id="playerCoins">0</strong></div>
			</div>
		</div>
		<ul>
			<li><button data-section="home">🏠 Home</button></li>
			<li><button data-section="quiz">❓ Quiz</button></li>
			<li><button data-section="packs">🎴 Packs</button></li>
			<li><button data-section="carddex">📚 Card Dex</button></li>
			<li><button data-section="bazaar">💱 Bazaar</button></li>
			<li><button data-section="leaderboard">🏆 Leaderboard</button></li>
			<li><button data-section="profile">👤 Profile</button></li>
		</ul>
		<div style="margin-top: 18px; border-top: 1px dashed rgba(255,255,255,0.04); padding-top: 12px; font-size: 13px; color: rgba(255,255,255,0.8)">
			Tip: sign in to sync your profile. </div>
	</nav>

  <main>
    <!-- Home -->
	<section id="home" class="section active">
		<div class="home-cover box">
			<div class="home-card">
				<div class="home-left">
					<h2 style="margin-top: 0">Welcome,
					<span id="playerNameDisplay">Player</span> 👋</h2>
					<p class="muted">Use the menu to start a quiz, open packs, browse 
					your card dex, or visit the bazaar.</p>
					<div style="display: flex; gap: 8px; margin-top: 16px; flex-wrap: wrap">
						<button class="primary" onclick="showSection('quiz')" style="background: #fff; color: #07213a; border-radius: 10px; padding: 10px 14px; border: none; font-weight: 700">
						Start Quiz</button>
						<button class="primary" onclick="showSection('packs')" style="background: var(--accent-3); color: white; border-radius: 10px; padding: 10px 14px; border: none; font-weight: 700">
						Open Packs</button></div>
					<div style="margin-top: 18px">
						<div class="box" style="background: linear-gradient(180deg,#fff,#fbfeff); padding: 12px">
							<strong>Quick stats</strong>
							<div style="display: flex; gap: 10px; margin-top: 8px; flex-wrap: wrap">
								<div class="muted">
									Packs opened: <strong id="packsOpened">0</strong></div>
								<div class="muted">
									Unique cards: <strong id="uniqueCards">0</strong></div>
								<div class="muted">
									Quiz score: <strong id="quizScore">0</strong></div>
							</div>
						</div>
					</div>
				</div>
				<div class="home-right">
					<img alt="Home cover" class="hero-art" src="home_cover.png" />
				</div>
			</div>
		</div>
	</section>
	<!-- Quiz -->
	<section id="quiz" class="section">
		<h2>Quiz — Choose category</h2>
		<div class="box">
			<div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px">
				<button class="primary quiz-cat" data-cat="biology">Biology
				</button><button class="primary quiz-cat" data-cat="chemistry">Chemistry
				</button><button class="primary quiz-cat" data-cat="physics">Physics
				</button><button class="primary quiz-cat" data-cat="accounting">
				Accounting</button>
				<button class="primary quiz-cat" data-cat="econs">Econs</button>
			</div>
			<div id="quizControls" style="margin-bottom: 12px;">
			</div>
			<div id="quizContainer" style="min-height: 160px;">
			</div>
		</div>
	</section>
	<!-- Packs -->
	<section id="packs" class="section">
		<h2>Packs</h2>
		<div class="box">
			<p>Each pack costs <strong>150 coins</strong>. Click a pack to open.</p>
			<div id="packMessage" class="muted">
			</div>
			<div class="pack-grid" style="margin-top: 12px">
				<div class="pack-option" onclick="openPack('cards.json')">
					<img alt="Prismatic Evolutions" src="prismatic_evolutions_art.png" />
					<div style="font-weight: 700; margin-top: 8px">
						Prismatic Evolutions</div>
				</div>
				<div class="pack-option" onclick="openPack('twilightcards.json')">
					<img alt="Twilight Masquerade" src="twilight_masquerade_art.png" />
					<div style="font-weight: 700; margin-top: 8px">
						Twilight Masquerade</div>
				</div>
				<div class="pack-option" onclick="openPack('151cards.json')">
					<img alt="Scarlet &amp; Violet 151" src="pokemon_151_art.png" />
					<div style="font-weight: 700; margin-top: 8px">
						Scarlet &amp; Violet 151</div>
				</div>
			</div>
			<div id="packLauncher" style="display: none; margin-top: 14px">
			</div>
		</div>
	</section>
	<!-- Card Dex -->
	<section id="carddex" class="section">
		<h2>Card Dex</h2>
		<div class="box">
			<div style="display: flex; gap: 8px; align-items: center; margin-bottom: 12px">
				<input id="cardDexSearch" placeholder="Search cards by name..." style="flex: 1; padding: 10px; border-radius: 10px; border: 1px solid var(--glass-border)" />
				<label style="display: flex; gap: 6px; align-items: center">
				<input id="cardDexOnlyOwned" type="checkbox" />
				<span style="font-size: 14px; color: #333">Only show owned</span>
				</label>
				<button id="cardDexRefresh" class="primary" style="padding: 10px 12px; border-radius: 10px">
				Refresh</button></div>
			<div id="cardDexResults">
			</div>
		</div>
	</section>
	<!-- Bazaar -->
	<section id="bazaar" class="section">
		<h2>Bazaar</h2>
		<div class="box">
			<p class="muted">Create or buy listings (localStorage used if Firestore 
			not connected).</p>
			<div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center; margin-bottom: 12px">
				<select id="bazaarPackSelect">
				<option value="prismatic">Prismatic</option>
				<option value="twilight">Twilight</option>
				<option value="sv151">SV151</option>
				</select>
				<input id="bazaarCardName" placeholder="Card name (exact match from pack JSON)" />
				<input id="bazaarPrice" placeholder="Price (coins)" style="width: 120px" type="number" />
				<label style="display: flex; gap: 6px; align-items: center">
				<input id="bazaarFromInventory" type="checkbox" />
				<span style="font-size: 13px">From inventory</span> </label>
				<button id="listCardBtn" class="primary">List Card</button>
			</div>
			<div id="marketListings" class="market-listings">
			</div>
		</div>
	</section>
	<!-- Leaderboard -->
	<section id="leaderboard" class="section">
		<h2>Leaderboard</h2>
		<div id="leaderboardBox2" class="box">
		</div>
	</section>
	<!-- Profile -->
	<section id="profile" class="section">
		<h2>Trainer Profile</h2>
		<div id="profileCardWrapper" class="profile-card">
			<div class="profile-left">
				<div id="avatarImg" class="avatar" style="background-image: url('default_avatar.png')">
				</div>
				<div style="margin-top: 12px">
					<div id="gsiButton">
					</div>
					<button id="googleLogoutBtn" style="display: none; margin-top: 8px">
					Logout</button></div>
			</div>
			<div class="profile-right">
				<h3 id="playerNameDisplay">Player</h3>
				<div style="margin: 8px 0">
					<input id="playerNameInput" placeholder="Enter name" style="padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.12)" type="text" />
					<button id="saveNameBtn" class="primary" style="margin-left: 8px">
					Save</button></div>
				<div id="profileBox2" class="box" style="background: transparent; border: none; padding: 0;">
					<p><strong>ID:</strong> <span id="playerID">000001</span></p>
					<p><strong>Coins:</strong> <span id="playerCoins">0</span></p>
					<p><strong>Packs Opened:</strong> <span id="packsOpened">0</span></p>
					<p><strong>Total Cards:</strong> <span id="totalCards">0</span></p>
					<p><strong>Unique Cards:</strong> <span id="uniqueCards">0</span></p>
					<ul style="margin: 6px 0 0 18px">
						<li>Prismatic: <span id="uniquePrismatic">0</span></li>
						<li>Twilight: <span id="uniqueTwilight">0</span></li>
						<li>SV151: <span id="uniqueSV151">0</span></li>
					</ul>
					<p><strong>Quiz Score:</strong> <span id="quizScore">0</span></p>
				</div>
			</div>
		</div>
	</section>
	<footer class="note">
		Files to place in same folder: card JSONs for packs (<code>cards.json</code>,
		<code>twilightcards.json</code>, <code>151cards.json</code>) and quiz JSONs 
		(e.g. <code>biology.json</code>).
	</footer>
  </main>
</div>
<!-- Pack Overlay -->
<div id="packOverlay" aria-hidden="true">
	<button id="packOverlayClose" class="overlay-close">✕</button>
	<div class="overlay-stage">
		<div id="overlayStack" class="overlay-stack">
		</div>
		<div class="overlay-meta">
			<div id="overlayRemaining" style="font-size: 16px; font-weight: 700; margin-bottom: 8px">
			</div>
			<div id="packDropDetails" class="muted">
				Click the stack to reveal cards one-by-one.</div>
		</div>
	</div>
</div>
<!-- Firebase App (compat) - keep your config here -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAUvR4sCv3mkMF7hqfgvxU2q3HOsEL3dbQ",
    authDomain: "y10pkmnrevisiongame-532c9.firebaseapp.com",
    projectId: "y10pkmnrevisiongame-532c9",
    storageBucket: "y10pkmnrevisiongame-532c9.appspot.com",
    messagingSenderId: "907520433089",
    appId: "1:907520433089:web:5cde712de4d3a2c80b6d40",
    measurementId: "G-HR2BCPKLPC"
  };
  if (window.firebase && (!firebase.apps || !firebase.apps.length)) {
    firebase.initializeApp(firebaseConfig);
  }
</script>
<!-- Your main script (keeps same filename) -->
<script src="main.js"></script>

</body>

</html>
